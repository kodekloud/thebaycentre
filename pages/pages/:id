<style>
    .store_detail_description{
        margin-top:15px;
    }
</style>
<div class="banner_container">
    <img src="" id="main_image" class="main_image" alt="">
    <div class="missing_out_div">
        <p onclick="javascript:toggle_news_form()">Fear of missing out?<i id="fear_caret" class="fa fa-caret-down"></i></p>
        <div class="hidden_newsletter_form">
            <form style="font-size:12px" id="banner_newsletter">
                <span><input id="banner_email" name="cm-iixuu-iixuu" type="email" required  placeholder="Email address"/><button type="submit" id="banner_submit">Subscribe</button></span><br>
                        <input id="banner_agree_terms" type="checkbox" required value="I agree to receive newsletters from The Bay Centre">I agree to receive newsletters from The Bay Centre
                        
                         <input type="hidden" name="cm-f-jhtykd" id ="banner_source" />
                         <input type="hidden" name="cm-f-jhtykh" id="banner_terms"/>
            </form>
        </div>
    </div>
</div>
<div class="share_this_icon_div">
    <span class='st_sharethis'></span>   
</div>


<div class="store_detail_content">
    
    <div class="detail_left_div">

        <div id="promo_title_container">
            <script id="promo_title_template" type="x-tmpl-mustache/text">
                <p class="store_detail_title">{{title}}</p>
                
            </script>
        </div>
        
     
        <div id="store_detail_left_content_container">
            <script id="store_detail_left_content_template" type="x-tmpl-mustache/text">
                <p class="store_detail_description">{{html}}</p>
            </script>
        </div>
    </div>
    <div class="detail_right_div">
        <div id="store_detail_right_content_container">
            <script id="store_detail_right_content_template" type="x-tmpl-mustache/text">
                <a href="{{alt_store_front_url}}" rel="lightbox-gallery" title="{{name}}">
                    <img class="store_front" alt="photo_{{name}}" src="{{alt_store_front_url}}"/>
                </a>
            </script>
        </div>
        <div class="hours_div">  
            <p class="hours_title">Hours</p>
            <div id="store_detail_hours_container">
                <script id="store_detail_hours_template" type="x-tmpl-mustache/text">
                    <div class="hours_object">
                        <p class="hours_day">{{day}}</p>
                        <p class="hours_time">{{hour_string}}</p>
                    </div>
                </script>    
            </div>
            <p class="hours_day">Hours subject to change</p>
        </div>
    </div>
</div>



<!--For more information please see http://learnjs.io/blog/2013/11/30/snapsvg-resources/-->
<script src="//cdnjs.cloudflare.com/ajax/libs/snap.svg/0.3.0/snap.svg-min.js"></script>
<script src="http://kodekloud.s3.amazonaws.com/sites/5422419e4a616d74d9030000/e1fb5e17ab727d248230fbcb51da868f/jquery.panzoom.min.js"></script>

<script>
    $("#main_image").attr("src", "http://assets.kodekloud.io/sites/556628266e6f640eb3000000/100437cc60f41ae910b0356151c200b6/guest_banner1.jpg");
    $("#left_image").attr("src", "http://assets.kodekloud.io/sites/556628266e6f640eb3000000/100437cc60f41ae910b0356151c200b6/guest_banner3.jpg");
    $("#right_image").attr("src", "http://assets.kodekloud.io/sites/556628266e6f640eb3000000/100437cc60f41ae910b0356151c200b6/guest_banner2.jpg");
    
    
    $(document).ready(function() {
        function renderPageData(){
            renderpageHTML();
        }
        
        function renderpageHTML(){
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            prefix = get_prefix();
            var pages_json = prefix+"/pages/" + slug + ".json"
            $.getJSON(pages_json).done(function(data) {
                renderPageData("#promo_title_container", "#promo_title_template", data, "title")
            }).fail(function(jqXHR) {
                if (jqXHR.status == 404) {
                    $("#404_msg").fadeIn("fast");
                }
            }); 
        }
        
        
        function renderPageData(container, template, collection, type){
            var item_list = [];
            var item_rendered = [];
            var template_html = $(template).html();
            Mustache.parse(template_html);   // optional, speeds up future uses
            
            // item_list.push(collection);
            // collection = []
            // collection = item_list;
            
            $.each( collection , function( key, val ) {
                console.log(val)
                var rendered = Mustache.render(template_html,val);
                item_rendered.push(rendered);
    
            });
            
            $(container).show();
            $(container).html(item_rendered.join(''));
        };
        
        
        loadMallData(renderPageData);
    })
</script>